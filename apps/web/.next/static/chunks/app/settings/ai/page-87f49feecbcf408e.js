(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{34430:function(e,s,t){Promise.resolve().then(t.bind(t,87269))},87269:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var a=t(69245),l=t(69703),r=t(64439),n=t(89619),o=t(26218),i=t(34673),c=t(44636),d=t(90024),m=t(55744),u=t(94489),h=t(63260),x=t(19118),f=t(24477),g=t(82872),p=t(74067),j=t(69431);function v(){let{rateCard:e,fetchRateCard:s,createRateCardItem:t,updateRateCardItem:v,deleteRateCardItem:N,isLoading:b}=(0,r.m)(),[w,S]=(0,l.useState)('You are \'The Architect,\' a world-class proposal specialist. Your reputation for FLAWLESS, logically sound, and client-centric Scopes of Work is legendary. You NEVER make foolish mistakes and you ALWAYS follow instructions with absolute precision.\n\nFirst, engage in conversational dialogue to understand the user\'s project needs. Ask clarifying questions to gather details about goals, scope, timeline, and requirements. Only when the user provides sufficient project details or uses commands like "/buildSOW" or "generate SOW", respond with the JSON object.\n\nIf the message appears to be a greeting or very short (like "hi" or "hello"), respond conversationally to start gathering information: "Hello! I\'d love to help you create a SOW. What kind of project are you working on? Tell me about your goals and requirements."\n\nFor regular messages, respond conversationally to guide the conversation toward creating a comprehensive project brief. Once you have enough information or the user indicates readiness, generate the SOW JSON.\n\nWhen generating the SOW JSON:\n- Your sole function is to receive a user\'s project brief and respond with a single, complete, and perfectly structured JSON object. You do not write pleasantries, apologies, or any text outside of the JSON object.\n- Always generate the full, multi-part SOW with multiple scopes.\n- All text fields must be intelligently generated based on the conversation.'),[k,C]=(0,l.useState)(""),[A,I]=(0,l.useState)(null),[O,z]=(0,l.useState)({name:"",rate:""}),[W,Z]=(0,l.useState)(!1),[F,L]=(0,l.useState)([]),[E,T]=(0,l.useState)(""),[Y,M]=(0,l.useState)(""),[J,P]=(0,l.useState)(!1),[R,U]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s(),_(),q(),B()},[s]);let _=async()=>{try{Z(!0);let e=await fetch("/api/settings/systemPrompt");if(e.ok){let s=await e.json();S(s.value)}}catch(e){console.log("Using default system prompt")}finally{Z(!1)}},q=async()=>{try{let e=await fetch("/api/ai/models");if(e.ok){let s=await e.json();L(s)}}catch(e){console.error("Failed to load AI models:",e)}},B=async()=>{try{let e=await fetch("/api/settings/selectedModel");if(e.ok){let s=await e.json();T(s.value||"")}}catch(e){console.log("Using default model")}},D=async()=>{try{await fetch("/api/settings/selectedModel",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:E})})}catch(e){console.error("Failed to save selected model:",e)}},H=async()=>{try{Z(!0),await fetch("/api/settings/systemPrompt",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:w})})}catch(e){console.error("Failed to save system prompt:",e)}finally{Z(!1)}},V=e.filter(e=>e.name.toLowerCase().includes(k.toLowerCase()));F.filter(e=>(""===Y||e.displayName.toLowerCase().includes(Y.toLowerCase()))&&(!J||e.id.includes(":free")));let $=async()=>{if(O.name.trim()&&O.rate.trim())try{await t({name:O.name.trim(),rate:parseInt(O.rate)}),z({name:"",rate:""})}catch(e){console.error("Failed to create rate card item:",e)}},G=async(e,s,t)=>{try{await v(e,{name:s,rate:t}),I(null)}catch(e){console.error("Failed to update rate card item:",e)}},K=async e=>{if(confirm("Are you sure you want to delete this rate card item?"))try{await N(e)}catch(e){console.error("Failed to delete rate card item:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsxs)("div",{className:"border-b p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)("a",{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"Back to Workbench"]})}),(0,a.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-6 w-6"}),"AI Engine Settings"]})]}),(0,a.jsx)(j.T,{})]}),(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"AI Model Selection"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose which AI model to use for generating SOWs. Select from available AI models."})]}),(0,a.jsx)(o.aY,{className:"space-y-4",children:(0,a.jsx)(d.f,{selectedModel:E,onModelChange:T,onSave:D,showSaveButton:!0})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"AI System Prompt"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Customize the AI's personality, behavior, and core instructions. This controls how the SOW Workbench generates proposals."})]}),(0,a.jsxs)(o.aY,{className:"space-y-4",children:[(0,a.jsx)(c.g,{value:w,onChange:e=>S(e.target.value),className:"font-mono text-sm min-h-[400px] resize-none",placeholder:"Enter the AI system prompt..."}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[w.length," characters"]}),(0,a.jsxs)(n.z,{onClick:H,disabled:W,children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),W?"Saving...":"Save System Prompt"]})]})]})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsx)(o.Ol,{children:(0,a.jsx)(o.ll,{children:"Add New Rate Card Item"})}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(i.I,{placeholder:"Role/Service Name",value:O.name,onChange:e=>z(s=>({...s,name:e.target.value})),className:"flex-1"}),(0,a.jsx)(i.I,{type:"number",placeholder:"Rate (AUD per hour)",value:O.rate,onChange:e=>z(s=>({...s,rate:e.target.value})),className:"w-48"}),(0,a.jsxs)(n.z,{onClick:$,disabled:!O.name.trim()||!O.rate,children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})})]}),(0,a.jsxs)(o.Zb,{children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Master Rate Card"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"These rates are automatically injected into every AI-generated SOW. This is your master pricing database."})]}),(0,a.jsxs)(o.aY,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.I,{placeholder:"Search roles/services...",value:k,onChange:e=>C(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[V.length," of ",e.length," items"]})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:b?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading rate card..."}):0===V.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:k?"No items found matching your search.":"No rate card items found."}):V.map(e=>(0,a.jsx)(o.Zb,{className:"p-4",children:A===e.id?(0,a.jsx)(y,{item:e,onSave:(s,t)=>G(e.id,s,t),onCancel:()=>I(null)}):(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["AUD $",e.rate,"/hour"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>I(e.id),children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",onClick:()=>K(e.id),className:"text-destructive hover:text-destructive",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})]})]})},e.id))})]})]})]})]})}function y(e){let{item:s,onSave:t,onCancel:r}=e,[o,c]=(0,l.useState)(s.name),[d,m]=(0,l.useState)(s.rate.toString());return(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(i.I,{value:o,onChange:e=>c(e.target.value),className:"flex-1",autoFocus:!0}),(0,a.jsx)(i.I,{type:"number",value:d,onChange:e=>m(e.target.value),className:"w-48"}),(0,a.jsx)(n.z,{onClick:()=>{o.trim()&&d&&t(o.trim(),parseInt(d))},size:"sm",children:"Save"}),(0,a.jsx)(n.z,{onClick:r,variant:"outline",size:"sm",children:"Cancel"})]})}},90024:function(e,s,t){"use strict";t.d(s,{f:function(){return c}});var a=t(69245),l=t(69703),r=t(89619),n=t(34673),o=t(28251),i=t(2979);function c(e){var s;let{selectedModel:t,onModelChange:c,onSave:d,showSaveButton:m=!1}=e,[u,h]=(0,l.useState)([]),[x,f]=(0,l.useState)(""),[g,p]=(0,l.useState)(!1),[j,v]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!0),[b,w]=(0,l.useState)(null);(0,l.useEffect)(()=>{S()},[]);let S=async()=>{try{N(!0),w(null);let e=await fetch("/api/ai/models");if(e.ok){let s=await e.json();console.log("Loaded AI models:",s.length),h(s)}else w("Failed to load models")}catch(e){console.error("Failed to load AI models:",e),w("Network error")}finally{N(!1)}},k=u.filter(e=>(""===x||e.displayName.toLowerCase().includes(x.toLowerCase()))&&(!g||e.id.includes(":free"))),C=y?"Loading models...":b?"Error loading models":(null===(s=u.find(e=>e.id===t))||void 0===s?void 0:s.displayName)||"Select AI model...";return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"AI Model"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>v(!j),disabled:0===u.length,className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[C,j?(0,a.jsx)(o.Z,{className:"h-4 w-4"}):(0,a.jsx)(i.Z,{className:"h-4 w-4"})]}),j&&(0,a.jsxs)("div",{className:"absolute z-50 w-full bg-background border border-input rounded-md shadow-md mt-1 p-2",children:[(0,a.jsx)(n.I,{placeholder:"Search models...",value:x,onChange:e=>f(e.target.value),className:"mb-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"free-toggle",checked:g,onChange:e=>p(e.target.checked)}),(0,a.jsx)("label",{htmlFor:"free-toggle",className:"text-sm",children:"Show free models only"})]}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto",children:0===k.length?(0,a.jsx)("div",{className:"px-2 py-3 text-sm text-muted-foreground text-center",children:0===u.length?"Loading models...":"No models found"}):k.map(e=>(0,a.jsx)("button",{className:"w-full px-2 py-1 text-left hover:bg-accent hover:text-accent-foreground rounded",onClick:()=>{c(e.id),v(!1)},children:e.displayName},e.id))})]})]}),m&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Currently selected: ",C]}),(0,a.jsx)(r.z,{onClick:d,disabled:""===t,children:"Save Model"})]})]})}},44636:function(e,s,t){"use strict";t.d(s,{g:function(){return n}});var a=t(69245),l=t(69703),r=t(1917);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});n.displayName="Textarea"}},function(e){e.O(0,[530,274,340,321,433,744],function(){return e(e.s=34430)}),_N_E=e.O()}]);