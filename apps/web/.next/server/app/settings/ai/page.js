(()=>{var e={};e.id=915,e.ids=[915],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},85764:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(75122),s(36454),s(35036);var a=s(46510),r=s(17557),n=s(83259),i=s.n(n),l=s(6743),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["settings",{children:["ai",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,75122)),"/root/thecustom/apps/web/src/app/settings/ai/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,36454)),"/root/thecustom/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35036,23)),"next/dist/client/components/not-found-error"]}],d=["/root/thecustom/apps/web/src/app/settings/ai/page.tsx"],u="/settings/ai/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/settings/ai/page",pathname:"/settings/ai",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},60774:(e,t,s)=>{Promise.resolve().then(s.bind(s,17356))},17356:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(41567),r=s(57634),n=s(7039),i=s(89140),l=s(86361),o=s(82838),c=s(12953),d=s(48965),u=s(65618),h=s(19140);let m=(0,s(10247).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var p=s(18634),x=s(9563),f=s(15574),g=s(38923),y=s(12843);let v=`You are 'The Architect,' a world-class proposal specialist. Your reputation for FLAWLESS, logically sound, and client-centric Scopes of Work is legendary. You NEVER make foolish mistakes and you ALWAYS follow instructions with absolute precision.

First, engage in conversational dialogue to understand the user's project needs. Ask clarifying questions to gather details about goals, scope, timeline, and requirements. Only when the user provides sufficient project details or uses commands like "/buildSOW" or "generate SOW", respond with the JSON object.

If the message appears to be a greeting or very short (like "hi" or "hello"), respond conversationally to start gathering information: "Hello! I'd love to help you create a SOW. What kind of project are you working on? Tell me about your goals and requirements."

For regular messages, respond conversationally to guide the conversation toward creating a comprehensive project brief. Once you have enough information or the user indicates readiness, generate the SOW JSON.

When generating the SOW JSON:
- Your sole function is to receive a user's project brief and respond with a single, complete, and perfectly structured JSON object. You do not write pleasantries, apologies, or any text outside of the JSON object.
- Always generate the full, multi-part SOW with multiple scopes.
- All text fields must be intelligently generated based on the conversation.`;function b(){let{rateCard:e,fetchRateCard:t,createRateCardItem:s,updateRateCardItem:b,deleteRateCardItem:S,isLoading:w}=(0,n.m)(),[k,N]=(0,r.useState)(v),[C,Z]=(0,r.useState)(""),[M,E]=(0,r.useState)(null),[A,O]=(0,r.useState)({name:"",rate:""}),[z,I]=(0,r.useState)(!1),[P,q]=(0,r.useState)([]),[W,T]=(0,r.useState)(""),[L,_]=(0,r.useState)(""),[F,D]=(0,r.useState)(!1),[R,Y]=(0,r.useState)(!1),V=async()=>{try{await fetch("/api/settings/selectedModel",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:W})})}catch(e){console.error("Failed to save selected model:",e)}},J=async()=>{try{I(!0),await fetch("/api/settings/systemPrompt",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:k})})}catch(e){console.error("Failed to save system prompt:",e)}finally{I(!1)}},U=e.filter(e=>e.name.toLowerCase().includes(C.toLowerCase()));P.filter(e=>(""===L||e.displayName.toLowerCase().includes(L.toLowerCase()))&&(!F||e.id.includes(":free")));let G=async()=>{if(A.name.trim()&&A.rate.trim())try{await s({name:A.name.trim(),rate:parseInt(A.rate)}),O({name:"",rate:""})}catch(e){console.error("Failed to create rate card item:",e)}},H=async(e,t,s)=>{try{await b(e,{name:t,rate:s}),E(null)}catch(e){console.error("Failed to update rate card item:",e)}},B=async e=>{if(confirm("Are you sure you want to delete this rate card item?"))try{await S(e)}catch(e){console.error("Failed to delete rate card item:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsxs)("div",{className:"border-b p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(i.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)("a",{href:"/",className:"flex items-center gap-2",children:[a.jsx(u.Z,{className:"h-4 w-4"}),"Back to Workbench"]})}),(0,a.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-6 w-6"}),"AI Engine Settings"]})]}),a.jsx(y.T,{})]}),(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{children:"AI Model Selection"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose which AI model to use for generating SOWs. Select from available AI models."})]}),a.jsx(l.aY,{className:"space-y-4",children:a.jsx(d.f,{selectedModel:W,onModelChange:T,onSave:V,showSaveButton:!0})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{children:"AI System Prompt"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Customize the AI's personality, behavior, and core instructions. This controls how the SOW Workbench generates proposals."})]}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[a.jsx(c.g,{value:k,onChange:e=>N(e.target.value),className:"font-mono text-sm min-h-[400px] resize-none",placeholder:"Enter the AI system prompt..."}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[k.length," characters"]}),(0,a.jsxs)(i.z,{onClick:J,disabled:z,children:[a.jsx(m,{className:"h-4 w-4 mr-2"}),z?"Saving...":"Save System Prompt"]})]})]})]}),(0,a.jsxs)(l.Zb,{children:[a.jsx(l.Ol,{children:a.jsx(l.ll,{children:"Add New Rate Card Item"})}),a.jsx(l.aY,{children:(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx(o.I,{placeholder:"Role/Service Name",value:A.name,onChange:e=>O(t=>({...t,name:e.target.value})),className:"flex-1"}),a.jsx(o.I,{type:"number",placeholder:"Rate (AUD per hour)",value:A.rate,onChange:e=>O(t=>({...t,rate:e.target.value})),className:"w-48"}),(0,a.jsxs)(i.z,{onClick:G,disabled:!A.name.trim()||!A.rate,children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[a.jsx(l.ll,{children:"Master Rate Card"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"These rates are automatically injected into every AI-generated SOW. This is your master pricing database."})]}),(0,a.jsxs)(l.aY,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(o.I,{placeholder:"Search roles/services...",value:C,onChange:e=>Z(e.target.value),className:"pl-10"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[U.length," of ",e.length," items"]})]}),a.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:w?a.jsx("div",{className:"text-center py-8",children:"Loading rate card..."}):0===U.length?a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:C?"No items found matching your search.":"No rate card items found."}):U.map(e=>a.jsx(l.Zb,{className:"p-4",children:M===e.id?a.jsx(j,{item:e,onSave:(t,s)=>H(e.id,t,s),onCancel:()=>E(null)}):(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["AUD $",e.rate,"/hour"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>E(e.id),children:a.jsx(f.Z,{className:"h-4 w-4"})}),a.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>B(e.id),className:"text-destructive hover:text-destructive",children:a.jsx(g.Z,{className:"h-4 w-4"})})]})]})},e.id))})]})]})]})]})}function j({item:e,onSave:t,onCancel:s}){let[n,l]=(0,r.useState)(e.name),[c,d]=(0,r.useState)(e.rate.toString());return(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx(o.I,{value:n,onChange:e=>l(e.target.value),className:"flex-1",autoFocus:!0}),a.jsx(o.I,{type:"number",value:c,onChange:e=>d(e.target.value),className:"w-48"}),a.jsx(i.z,{onClick:()=>{n.trim()&&c&&t(n.trim(),parseInt(c))},size:"sm",children:"Save"}),a.jsx(i.z,{onClick:s,variant:"outline",size:"sm",children:"Cancel"})]})}},48965:(e,t,s)=>{"use strict";s.d(t,{f:()=>c});var a=s(41567),r=s(57634),n=s(89140),i=s(82838),l=s(8770),o=s(81041);function c({selectedModel:e,onModelChange:t,onSave:s,showSaveButton:c=!1}){let[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(""),[p,x]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!0),[b,j]=(0,r.useState)(null),S=d.filter(e=>(""===h||e.displayName.toLowerCase().includes(h.toLowerCase()))&&(!p||e.id.includes(":free"))),w=y?"Loading models...":b?"Error loading models":d.find(t=>t.id===e)?.displayName||"Select AI model...";return(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"AI Model"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>g(!f),disabled:0===d.length,className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[w,f?a.jsx(l.Z,{className:"h-4 w-4"}):a.jsx(o.Z,{className:"h-4 w-4"})]}),f&&(0,a.jsxs)("div",{className:"absolute z-50 w-full bg-background border border-input rounded-md shadow-md mt-1 p-2",children:[a.jsx(i.I,{placeholder:"Search models...",value:h,onChange:e=>m(e.target.value),className:"mb-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"checkbox",id:"free-toggle",checked:p,onChange:e=>x(e.target.checked)}),a.jsx("label",{htmlFor:"free-toggle",className:"text-sm",children:"Show free models only"})]}),a.jsx("div",{className:"max-h-40 overflow-y-auto",children:0===S.length?a.jsx("div",{className:"px-2 py-3 text-sm text-muted-foreground text-center",children:0===d.length?"Loading models...":"No models found"}):S.map(e=>a.jsx("button",{className:"w-full px-2 py-1 text-left hover:bg-accent hover:text-accent-foreground rounded",onClick:()=>{t(e.id),g(!1)},children:e.displayName},e.id))})]})]}),c&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Currently selected: ",w]}),a.jsx(n.z,{onClick:s,disabled:""===e,children:"Save Model"})]})]})}},12953:(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var a=s(41567),r=s(57634),n=s(2998);let i=r.forwardRef(({className:e,...t},s)=>a.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));i.displayName="Textarea"},65618:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},81041:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},8770:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},19140:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]])},10741:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},15574:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]])},18634:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9563:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},97350:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},38923:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(10247).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},73246:(e,t,s)=>{"use strict";var a=s(57634),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,i=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!r(e,s)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=n({inst:{value:s,getSnapshot:t}}),r=a[0].inst,d=a[1];return l(function(){r.value=s,r.getSnapshot=t,c(r)&&d({inst:r})},[e,s,t]),i(function(){return c(r)&&d({inst:r}),e(function(){c(r)&&d({inst:r})})},[e]),o(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:d},86371:(e,t,s)=>{"use strict";var a=s(57634),r=s(89555),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useSyncExternalStore,l=a.useRef,o=a.useEffect,c=a.useMemo,d=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,a,r){var u=l(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var m=i(e,(u=c(function(){function e(e){if(!o){if(o=!0,i=e,e=a(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return l=t}return l=e}if(t=l,n(i,e))return t;var s=a(e);return void 0!==r&&r(t,s)?(i=e,t):(i=e,l=s)}var i,l,o=!1,c=void 0===s?null:s;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,s,a,r]))[0],u[1]);return o(function(){h.hasValue=!0,h.value=m},[m]),d(m),m}},89555:(e,t,s)=>{"use strict";e.exports=s(73246)},9798:(e,t,s)=>{"use strict";e.exports=s(86371)},75122:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(82210).createProxy)(String.raw`/root/thecustom/apps/web/src/app/settings/ai/page.tsx#default`)},31803:(e,t,s)=>{"use strict";s.d(t,{Ue:()=>h});let a=e=>{let t;let s=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,n={setState:a,getState:r,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},i=t=e(a,r,n);return n},r=e=>e?a(e):a;var n=s(57634),i=s(9798);let{useDebugValue:l}=n,{useSyncExternalStoreWithSelector:o}=i,c=!1,d=e=>e,u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?r(e):e,s=(e,s)=>(function(e,t=d,s){s&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let a=o(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return l(a),a})(t,e,s);return Object.assign(s,t),s},h=e=>e?u(e):u}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[813,193,459],()=>s(85764));module.exports=a})();