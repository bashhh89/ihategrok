exports.id=459,exports.ids=[459],exports.modules={3161:(e,t,a)=>{Promise.resolve().then(a.bind(a,73704))},43375:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,89344,23)),Promise.resolve().then(a.t.bind(a,57958,23)),Promise.resolve().then(a.t.bind(a,57760,23)),Promise.resolve().then(a.t.bind(a,81339,23)),Promise.resolve().then(a.t.bind(a,76728,23)),Promise.resolve().then(a.t.bind(a,85414,23))},73704:(e,t,a)=>{"use strict";a.d(t,{ThemeProvider:()=>s});var r=a(41567);a(57634);var o=a(34564);function s({children:e,...t}){return r.jsx(o.f,{...t,children:e})}},12843:(e,t,a)=>{"use strict";a.d(t,{T:()=>c});var r=a(41567),o=a(57634),s=a(97350),i=a(10741),n=a(34564),l=a(89140);function c(){let{theme:e,setTheme:t}=(0,n.F)(),[a,c]=o.useState(!1);return(o.useEffect(()=>{c(!0)},[]),a)?(0,r.jsxs)(l.z,{variant:"ghost",size:"sm",onClick:()=>t("dark"===e?"light":"dark"),children:[r.jsx(s.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),r.jsx(i.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),r.jsx("span",{className:"sr-only",children:"Toggle theme"})]}):r.jsx(l.z,{variant:"ghost",size:"sm",children:r.jsx(s.Z,{className:"h-[1.2rem] w-[1.2rem]"})})}},89140:(e,t,a)=>{"use strict";a.d(t,{z:()=>c});var r=a(41567),o=a(57634),s=a(96409),i=a(47985),n=a(2998);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef(({className:e,variant:t,size:a,asChild:o=!1,...i},c)=>{let d=o?s.g7:"button";return r.jsx(d,{className:(0,n.cn)(l({variant:t,size:a,className:e})),ref:c,...i})});c.displayName="Button"},86361:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>n,Zb:()=>i,aY:()=>c,ll:()=>l});var r=a(41567),o=a(57634),s=a(2998);let i=o.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let n=o.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let l=o.forwardRef(({className:e,...t},a)=>r.jsx("h3",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle",o.forwardRef(({className:e,...t},a)=>r.jsx("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let c=o.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",o.forwardRef(({className:e,...t},a)=>r.jsx("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},82838:(e,t,a)=>{"use strict";a.d(t,{I:()=>i});var r=a(41567),o=a(57634),s=a(2998);let i=o.forwardRef(({className:e,type:t,...a},o)=>r.jsx("input",{type:t,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...a}));i.displayName="Input"},2998:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(97926),o=a(13735);function s(...e){return(0,o.m6)((0,r.W)(e))}},7039:(e,t,a)=>{"use strict";a.d(t,{m:()=>s});var r=a(31803);let o="https://demo.qandu.me",s=(0,r.Ue)((e,t)=>({sows:[],activeSow:null,rateCard:[],folders:[],errorMessage:null,isLoading:!1,isSaving:!1,sidebarVisible:!0,chatPanelVisible:!1,chatMode:"plan",contextItems:[],isTyping:!1,fetchSows:async()=>{e({isLoading:!0,errorMessage:null});try{let t=await fetch(`${o}/api/sows`);if(!t.ok)throw Error("Failed to fetch SOWs");let a=await t.json();e({sows:a})}catch(t){throw console.error("Error fetching SOWs:",t),e({errorMessage:"Failed to load SOWs. Please check your connection and try again."}),t}finally{e({isLoading:!1})}},createSow:async t=>{e({errorMessage:null});try{let a=await fetch(`${o}/api/sows`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t||"Untitled SOW",sowData:{projectTitle:"",clientName:"",projectOverview:"",projectOutcomes:[],scopes:[],budgetNote:""}})});if(!a.ok)throw Error("Failed to create SOW");let r=await a.json();return e(e=>({sows:[{id:r.id,name:r.name,updatedAt:r.updatedAt},...e.sows]})),r}catch(t){throw console.error("Error creating SOW:",t),e({errorMessage:"Could not create a new SOW. Please check your connection and try again."}),t}},selectSow:async a=>{e({isLoading:!0,errorMessage:null});try{let r=await fetch(`${o}/api/sows/${a}`);if(!r.ok)throw Error("Failed to fetch SOW");let s=await r.json(),i=t().rateCard,n=s.sowData&&s.sowData.scopes?{...s.sowData,scopes:s.sowData.scopes.map(e=>({...e,roles:e.roles.map(e=>{let t=i.find(t=>t.name===e.name),a=t?t.rate:0;return{...e,rate:a}})}))}:s.sowData,l={...s,sowData:n};e({activeSow:l}),setTimeout(()=>t().recalculateAllTotals(),0)}catch(o){console.error("Error selecting SOW:",o);let r=t().sows.find(e=>e.id===a);if(r)e({activeSow:{...r,folderId:null,sowData:{},messages:[],createdAt:r.updatedAt,updatedAt:r.updatedAt}}),setTimeout(()=>t().recalculateAllTotals(),0);else throw e({errorMessage:"Failed to load the SOW. Please check your connection and try again."}),o}finally{e({isLoading:!1})}},renameSow:async(t,a)=>{e({errorMessage:null});try{await fetch(`${o}/api/sows/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})}),e(e=>({sows:e.sows.map(e=>e.id===t?{...e,name:a,updatedAt:new Date}:e),activeSow:e.activeSow?.id===t?{...e.activeSow,name:a}:e.activeSow}))}catch(t){throw console.error("Error renaming SOW:",t),e({errorMessage:"Failed to rename SOW. Please check your connection and try again."}),t}},updateActiveSowName:async e=>{let{activeSow:a}=t();a&&await t().renameSow(a.id,e)},updateActiveSowData:async a=>{let{activeSow:r}=t();if(r){e({isSaving:!0,errorMessage:null});try{await fetch(`${o}/api/sows/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({sowData:a})});let t={...r,sowData:a};e(e=>({activeSow:t,sows:e.sows.map(e=>e.id===r.id?{...e,updatedAt:new Date}:e)}))}catch(t){throw console.error("Error updating SOW data:",t),e({errorMessage:"Failed to save changes. Please check your connection and try again."}),t}finally{e({isSaving:!1})}}},deleteSow:async t=>{e({errorMessage:null});try{if(!(await fetch(`${o}/api/sows/${t}`,{method:"DELETE"})).ok)throw Error("Failed to delete SOW");e(e=>({sows:e.sows.filter(e=>e.id!==t),activeSow:e.activeSow?.id===t?null:e.activeSow}))}catch(t){throw console.error("Error deleting SOW:",t),e({errorMessage:"Failed to delete SOW. Please check your connection and try again."}),t}},moveSow:async(a,r)=>{e({errorMessage:null});try{if(!(await fetch(`${o}/api/sows/${a}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({folderId:r})})).ok)throw Error("Failed to move SOW");await t().fetchSows(),await t().fetchFolders()}catch(t){throw console.error("Error moving SOW:",t),e({errorMessage:"Failed to move SOW. Please check your connection and try again."}),t}},fetchFolders:async()=>{e({errorMessage:null});try{let t=await fetch(`${o}/api/folders`);if(!t.ok)throw Error("Failed to fetch folders");let a=await t.json();e({folders:a})}catch(t){console.error("Error fetching folders:",t),e({errorMessage:null}),e({folders:[]})}},createFolder:async(a,r)=>{e({errorMessage:null});try{let e=await fetch(`${o}/api/folders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,parentId:r})});if(!e.ok){let t=await e.text();throw console.error("Folder creation failed:",t),Error(`Failed to create folder: ${t}`)}let s=await e.json();return await t().fetchFolders(),s}catch(t){throw console.error("Error creating folder:",t.message),e({errorMessage:`Could not create folder. ${t.message}`}),t}},renameFolder:async(a,r)=>{e({errorMessage:null});try{if(!(await fetch(`${o}/api/folders/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r})})).ok)throw Error("Failed to rename folder");await t().fetchFolders()}catch(t){throw console.error("Error renaming folder:",t),e({errorMessage:"Failed to rename folder. Please check your connection and try again."}),t}},deleteFolder:async a=>{e({errorMessage:null});try{if(!(await fetch(`${o}/api/folders/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete folder");await t().fetchFolders()}catch(t){throw console.error("Error deleting folder:",t),e({errorMessage:"Failed to delete folder. Please check your connection and try again."}),t}},sendMessage:async(a,r="plan")=>{let{activeSow:s}=t();if(!s)return;let i="/buildsow"===a.trim().toLowerCase(),n=["/newScope","/addRole","/setBudget"].some(e=>a.trim().startsWith(e))&&!i,l={id:`temp-${Math.random()}`,role:"user",content:a,sowId:s.id,createdAt:new Date};e(e=>({activeSow:e.activeSow?{...e.activeSow,messages:[...e.activeSow.messages||[],l]}:null})),e({isLoading:!0,errorMessage:null});try{if(i){let a=await fetch(`${o}/api/sows/${s.id}/generate`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to generate SOW")}let{sowData:r,aiMessage:i,architectsLog:n}=await a.json(),l="Untitled SOW";if(r?.projectTitle&&r?.clientName?l=`${r.clientName} - ${r.projectTitle}`:r?.projectTitle?l=r.projectTitle:r?.clientName&&(l=`${r.clientName} Project`),"Untitled SOW"!==l)try{await fetch(`${o}/api/sows/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l})})}catch(e){console.error("Failed to update SOW name:",e)}let c={id:`ai-${Date.now()}`,role:"assistant",content:i||"I've generated a complete SOW based on our conversation.",sowId:s.id,createdAt:new Date};c.architectsLog=n,e(e=>({activeSow:e.activeSow?{...e.activeSow,name:l,messages:[...e.activeSow.messages.filter(e=>!e.id.startsWith("temp-")),c],sowData:r}:null})),setTimeout(()=>{t().recalculateAllTotals(),t().fetchSows()},0)}else if(n){let r=await fetch(`${o}/api/sows/${s.id}/refine`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:a})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to execute command")}let{sowData:i}=await r.json();e(e=>({activeSow:e.activeSow?{...e.activeSow,messages:e.activeSow.messages.filter(e=>!e.id.startsWith("temp-")),sowData:i}:null})),setTimeout(()=>t().recalculateAllTotals(),0)}else try{let t=await fetch(`${o}/api/sows/${s.id}/conversation`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a})});if(!t.ok){let t={id:`ai-fallback-${Date.now()}`,role:"assistant",content:"I'm experiencing some technical difficulties with the AI service right now. However, you can still create and edit SOWs manually, and export them to PDF and Excel.",sowId:s.id,createdAt:new Date};e(e=>({activeSow:e.activeSow?{...e.activeSow,messages:[...e.activeSow.messages.filter(e=>!e.id.startsWith("temp-")),t]}:null}));return}let{reply:r}=await t.json();e(e=>({activeSow:e.activeSow?{...e.activeSow,messages:[...e.activeSow.messages.filter(e=>!e.id.startsWith("temp-")),r]}:null}))}catch(a){let t={id:`ai-demo-${Date.now()}`,role:"assistant",content:"Sorry, I'm having trouble connecting to the AI service. You can still work with your SOWs manually - create, edit, and export to PDF/Excel are all working.",sowId:s.id,createdAt:new Date};e(e=>({activeSow:e.activeSow?{...e.activeSow,messages:[...e.activeSow.messages.filter(e=>!e.id.startsWith("temp-")),t]}:null}))}}catch(a){console.error("Error sending message:",a);let t={id:`demo-safe-${Math.random()}`,role:"assistant",content:"I'm having technical issues with the AI features right now. The core SOW editor, PDF export, and Excel export are working fine though.",sowId:s.id,createdAt:new Date};e(e=>({activeSow:e.activeSow?{...e.activeSow,messages:[...e.activeSow.messages.filter(e=>!e.id.startsWith("temp-")),t]}:null,errorMessage:null}))}finally{e({isLoading:!1})}},generateSOW:async()=>{await t().sendMessage("/buildsow")},generateShareUrl:()=>{let{activeSow:e}=t();return e?`/sow/share/${e.id}`:null},fetchRateCard:async()=>{e({errorMessage:null});try{let t=await fetch(`${o}/api/rate-card`);if(!t.ok)throw Error("Failed to fetch rate card");let a=await t.json();e({rateCard:a})}catch(t){console.error("Error fetching rate card:",t),e({errorMessage:null}),e({rateCard:[]})}},createRateCardItem:async t=>{e({errorMessage:null});try{let a=await fetch(`${o}/api/rate-card`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to create rate card item");let r=await a.json();e(e=>({rateCard:[...e.rateCard,r]}))}catch(t){throw console.error("Error creating rate card item:",t),e({errorMessage:"Failed to create rate card item. Please check your connection and try again."}),t}},updateRateCardItem:async(t,a)=>{e({errorMessage:null});try{let r=await fetch(`${o}/api/rate-card/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error("Failed to update rate card item");let s=await r.json();e(e=>({rateCard:e.rateCard.map(e=>e.id===t?s:e)}))}catch(t){throw console.error("Error updating rate card item:",t),e({errorMessage:"Failed to update rate card item. Please check your connection and try again."}),t}},deleteRateCardItem:async t=>{e({errorMessage:null});try{if(!(await fetch(`${o}/api/rate-card/${t}`,{method:"DELETE"})).ok)throw Error("Failed to delete rate card item");e(e=>({rateCard:e.rateCard.filter(e=>e.id!==t)}))}catch(t){throw console.error("Error deleting rate card item:",t),e({errorMessage:"Failed to delete rate card item. Please check your connection and try again."}),t}},recalculateAllTotals:()=>{e(e=>{if(!e.activeSow?.sowData||"object"!=typeof e.activeSow.sowData)return e;let t=e.activeSow.sowData;if(!t.scopes||!Array.isArray(t.scopes))return e;let a=t.scopes.map(e=>{let t=0,a=e.roles.map(e=>{let a=Number(e.hours)||0,r=Number(e.rate)||0,o=a*r;return t+=o,{...e,total:o,hours:a,rate:r}});return{...e,roles:a,subtotal:t}}),r={...t,scopes:a};return{activeSow:{...e.activeSow,sowData:r}}})},updateRoleHours:(a,r,o)=>{e(e=>{if(!e.activeSow?.sowData)return e;let t=e.activeSow.sowData;if(!t.scopes||!Array.isArray(t.scopes))return e;let s=t.scopes.map((e,t)=>{if(t===a){let t=e.roles.map((e,t)=>t===r?{...e,hours:o}:e);return{...e,roles:t}}return e}),i={...t,scopes:s};return{activeSow:{...e.activeSow,sowData:i}}}),t().recalculateAllTotals()},updateRoleRate:(a,r,o)=>{e(e=>{if(!e.activeSow?.sowData)return e;let t=JSON.parse(JSON.stringify(e.activeSow.sowData));return t.scopes[a].roles[r].rate=o,{activeSow:{...e.activeSow,sowData:t}}}),t().recalculateAllTotals()},updateRole:(a,r,o,s)=>{e(e=>{if(!e.activeSow?.sowData)return e;let t=JSON.parse(JSON.stringify(e.activeSow.sowData));return t.scopes[a].roles[r][o]=s,{activeSow:{...e.activeSow,sowData:t}}}),t().recalculateAllTotals()},toggleSidebar:()=>{e(e=>({sidebarVisible:!e.sidebarVisible}))},toggleChatPanel:()=>{e(e=>({chatPanelVisible:!e.chatPanelVisible}))},setChatMode:t=>{e({chatMode:t})},updateContextItems:t=>{e({contextItems:t})},resetChat:async()=>{let{activeSow:a}=t();if(a)try{await fetch(`${o}/api/sows/${a.id}/messages`,{method:"DELETE"}),e(e=>({activeSow:e.activeSow?{...e.activeSow,messages:[]}:null}))}catch(e){console.error("Error resetting chat:",e)}},newChat:async()=>{try{let e=await t().createSow();await t().selectSow(e.id)}catch(e){console.error("Error creating new chat:",e)}}}))},36454:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,metadata:()=>n});var r=a(52269),o=a(75430),s=a.n(o);a(6358);let i=(0,a(82210).createProxy)(String.raw`/root/thecustom/apps/web/src/components/theme-provider.tsx#ThemeProvider`),n={title:"Social Garden - SOW Workbench",description:"AI-powered generation and editing of professional Scopes of Work using Grok AI"};function l({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[r.jsx("head",{children:r.jsx("script",{src:"/analytics/track.js",async:!0})}),r.jsx("body",{className:s().className,suppressHydrationWarning:!0,children:r.jsx(i,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:e})})]})}},6358:()=>{}};